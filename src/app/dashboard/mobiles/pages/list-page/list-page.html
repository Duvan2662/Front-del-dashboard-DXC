<app-toolbar></app-toolbar>


<!-- Buscador -->
<div class="p-datatable-header bg-[#18181B] w-full p-4 mt-4">
  <div class="flex items-center justify-between w-full flex-wrap gap-3">

    <!-- TÃTULO -->
    <h5 class="m-0 font-medium text-sm sm:text-base whitespace-nowrap flex-1">
      Listado De Dispositivos
    </h5>

    <!-- INPUT -->
    <div class="relative flex-shrink-0 max-w-full">
      <!-- Icono -->
      <span class="absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none">
        <mat-icon class="!text-gray-500 text-xs sm:text-sm">search</mat-icon>
      </span>

      <input
        type="text"
        placeholder="Buscar..."
        [formControl]="searchControl"
        class="border border-gray-700 rounded-md bg-[#09090B] py-1 pl-8 pr-2 shadow-sm
               text-xs text-white placeholder:text-gray-400 sm:text-sm focus:outline-none focus:ring-2
               focus:ring-[#5F249F] transition
               w-32 xs:w-40 sm:w-52 max-w-full"
        #input>
    </div>

  </div>
</div>


<!-- Tabla -->
<div class="mat-elevation-z8">

  <!-- Contenedor responsive: scroll visible hasta pantallas medianas -->
  <div class="overflow-x-auto lg:overflow-visible">
    <table mat-table [dataSource]="dataSource" matSort class="!bg-[#18181B] !text-white min-w-max">

      @for (column of columns; track $index) {
      <ng-container matColumnDef={{column}}>
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="!text-white">
          {{ column | prettyName }}
        </th>
        <td mat-cell class="!text-white" *matCellDef="let row">
          {{ row[column] | defaultValue:'No aplica' }}
        </td>
      </ng-container>
      }

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="!text-white"></th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button
            class="w-10 h-10 border border-[#5CD7AE] text-[#33CB93] hover:bg-[#3F3F46] cursor-pointer no-underline rounded-full transition !p-0 mr-2 my-2"
            (click)="edit()"
            >
            <mat-icon class="!text-lg">edit</mat-icon>
          </button>

          <button mat-icon-button
            class="w-10 h-10 border border-[#B91C1C] text-[#C44E4E] hover:bg-[#3F3F46] cursor-pointer no-underline rounded-full transition !p-0"
            (click)="delete(row)"
            >
            <mat-icon class="!text-lg">delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row class="hover:!bg-[#3F3F46] !transition-colors"
          *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <mat-paginator
    [length]="totalItems"
    [pageSize]="pageSize"
    [pageIndex]="pageIndex"
    [pageSizeOptions]="[5, 10, 15, 20]"
    aria-label="Select page of users"
    class="!bg-[#18181B] !text-white">
  </mat-paginator>

</div>


